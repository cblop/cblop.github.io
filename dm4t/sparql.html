<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>DM4T PROJECT</title>
<meta name="generator" content="Org mode">
<link rel="stylesheet" type="text/css" href="style.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<header>
<h1 class="title">DM4T PROJECT</h1>
</header><hr >

<div id="outline-container-org778ed9f" class="outline-2">
<h2 id="org778ed9f">Querying Home Sensor Data with SPARQL</h2>
<div class="outline-text-2" id="text-org778ed9f">
<p>
<i>Matt Thompson</i>
</p>

<p>
<a href="https://teddinet.org">TEDDINET</a> is a multi-disciplinary research project to monitor the energy usage of homes and appliances, and work out ways to reduce it. From 2013 up until 2016, millions of sensor readings have been taken from hundreds of homes, recording data such as power usage, temperature, humidity, and sound levels. Now that all the data have been gathered, we have to figure out how to process it to make it easy to query and visualise.
</p>

<p>
My role in this project is to:
</p>

<ul class="org-ul">
<li>process the data to make it possible to send queries across multiple datasets</li>
<li>devise some example queries that show some example visualisations</li>
<li>design tools to help people convert their data so that we can send queries to it</li>
<li>find ways to query and convert these data sets on the fly without having to store a converted version on our own servers</li>
</ul>

<p>
The first technologies I'm looking at are <a href="https://en.wikipedia.org/wiki/Resource_Description_Framework">RDF</a> and <a href="https://en.wikipedia.org/wiki/SPARQL">SPARQL</a>, tools that were originally developed for the semantic web.
</p>

<p>
<b>RDF</b> is a way of describing graphs in subject-predicate-object triples. A simple way to think of these triples is that the <i>subject</i> and <i>object</i> refer to <i>things</i> (nodes on a graph), and the <i>predicate</i> describes their <i>relationship</i> (the edges on a graph).
</p>

<p>
Because it was designed for the semantic web, each part of a triple must refer to a specific instance of something using a unique identifier called a <b>URI</b>. A URI is similar to a web address, pointing to an address that can be used to identify a particular resource.
</p>

<p>
Examples of RDF triples are:
</p>

<p>
"Appliance 2 is an appliance":
</p>
<div class="org-src-container">
<pre class="src src-xml"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/2&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;https://w3id.org/seas/Appliance">&lt;</a><span style="color: #A6E22E;"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/2&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;https://w3id.org/seas/Appliance">http</a></span><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/2&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;https://w3id.org/seas/Appliance">://www.cs.bath.ac.uk/dm4t/enliten/appliance/2&gt; </a><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/2&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;https://w3id.org/seas/Appliance">&lt;</a><span style="color: #A6E22E;"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/2&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;https://w3id.org/seas/Appliance">http</a></span><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/2&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;https://w3id.org/seas/Appliance">://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; </a><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/2&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;https://w3id.org/seas/Appliance">&lt;</a><span style="color: #A6E22E;"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/2&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;https://w3id.org/seas/Appliance">https</a></span><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/2&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;https://w3id.org/seas/Appliance">://w3id.org/seas/Appliance&gt;</a>
</pre>
</div>

<p>
"Appliance 3 contains device 276":
</p>
<div class="org-src-container">
<pre class="src src-xml"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/3&gt; &lt;https://w3id.org/seas#contains&gt; &lt;http://www.cs.bath.ac.uk/dm4t/enliten/device/276">&lt;</a><span style="color: #A6E22E;"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/3&gt; &lt;https://w3id.org/seas#contains&gt; &lt;http://www.cs.bath.ac.uk/dm4t/enliten/device/276">http</a></span><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/3&gt; &lt;https://w3id.org/seas#contains&gt; &lt;http://www.cs.bath.ac.uk/dm4t/enliten/device/276">://www.cs.bath.ac.uk/dm4t/enliten/appliance/3&gt; </a><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/3&gt; &lt;https://w3id.org/seas#contains&gt; &lt;http://www.cs.bath.ac.uk/dm4t/enliten/device/276">&lt;</a><span style="color: #A6E22E;"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/3&gt; &lt;https://w3id.org/seas#contains&gt; &lt;http://www.cs.bath.ac.uk/dm4t/enliten/device/276">https</a></span><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/3&gt; &lt;https://w3id.org/seas#contains&gt; &lt;http://www.cs.bath.ac.uk/dm4t/enliten/device/276">://w3id.org/seas#contains&gt; </a><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/3&gt; &lt;https://w3id.org/seas#contains&gt; &lt;http://www.cs.bath.ac.uk/dm4t/enliten/device/276">&lt;</a><span style="color: #A6E22E;"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/3&gt; &lt;https://w3id.org/seas#contains&gt; &lt;http://www.cs.bath.ac.uk/dm4t/enliten/device/276">http</a></span><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/3&gt; &lt;https://w3id.org/seas#contains&gt; &lt;http://www.cs.bath.ac.uk/dm4t/enliten/device/276">://www.cs.bath.ac.uk/dm4t/enliten/device/276&gt;</a>
</pre>
</div>

<p>
"Reading 15998574 came from house 10":
</p>
<div class="org-src-container">
<pre class="src src-xml"><a href="http://www.cs.bath.ac.uk/dm4t/refit/reading/15998574&gt; &lt;http://purl.oclc.org/NET/ssnx/ssn#hasLocation&gt; &lt;http://www.cs.bath.ac.uk/dm4t/refit/home/house_10">&lt;</a><span style="color: #A6E22E;"><a href="http://www.cs.bath.ac.uk/dm4t/refit/reading/15998574&gt; &lt;http://purl.oclc.org/NET/ssnx/ssn#hasLocation&gt; &lt;http://www.cs.bath.ac.uk/dm4t/refit/home/house_10">http</a></span><a href="http://www.cs.bath.ac.uk/dm4t/refit/reading/15998574&gt; &lt;http://purl.oclc.org/NET/ssnx/ssn#hasLocation&gt; &lt;http://www.cs.bath.ac.uk/dm4t/refit/home/house_10">://www.cs.bath.ac.uk/dm4t/refit/reading/15998574&gt; </a><a href="http://www.cs.bath.ac.uk/dm4t/refit/reading/15998574&gt; &lt;http://purl.oclc.org/NET/ssnx/ssn#hasLocation&gt; &lt;http://www.cs.bath.ac.uk/dm4t/refit/home/house_10">&lt;</a><span style="color: #A6E22E;"><a href="http://www.cs.bath.ac.uk/dm4t/refit/reading/15998574&gt; &lt;http://purl.oclc.org/NET/ssnx/ssn#hasLocation&gt; &lt;http://www.cs.bath.ac.uk/dm4t/refit/home/house_10">http</a></span><a href="http://www.cs.bath.ac.uk/dm4t/refit/reading/15998574&gt; &lt;http://purl.oclc.org/NET/ssnx/ssn#hasLocation&gt; &lt;http://www.cs.bath.ac.uk/dm4t/refit/home/house_10">://purl.oclc.org/NET/ssnx/ssn#hasLocation&gt; </a><a href="http://www.cs.bath.ac.uk/dm4t/refit/reading/15998574&gt; &lt;http://purl.oclc.org/NET/ssnx/ssn#hasLocation&gt; &lt;http://www.cs.bath.ac.uk/dm4t/refit/home/house_10">&lt;</a><span style="color: #A6E22E;"><a href="http://www.cs.bath.ac.uk/dm4t/refit/reading/15998574&gt; &lt;http://purl.oclc.org/NET/ssnx/ssn#hasLocation&gt; &lt;http://www.cs.bath.ac.uk/dm4t/refit/home/house_10">http</a></span><a href="http://www.cs.bath.ac.uk/dm4t/refit/reading/15998574&gt; &lt;http://purl.oclc.org/NET/ssnx/ssn#hasLocation&gt; &lt;http://www.cs.bath.ac.uk/dm4t/refit/home/house_10">://www.cs.bath.ac.uk/dm4t/refit/home/house_10&gt;</a>
</pre>
</div>

<p>
The above triples are in the "n-triples" format, which is an XML representation of RDF triples. This format is a little verbose, as it uses one line per triple. A more efficient RDF representation is the "Turtle" format, which allows us to specify a subject with all of its predicates and objects separated by semicolons (and indented for legibility).
</p>

<p>
An example of a power reading from our ENLITEN dataset in the "turtle" format looks like this:
</p>

<div class="org-src-container">
<pre class="src src-ttl"><span style="color: #A6E22E;"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/reading/power/1&gt; a &lt;https://w3id.org/seas/PowerQuantity&gt; , &lt;https://w3id.org/seas/Observation">&lt;http://www.cs.bath.ac.uk/dm4t/enliten/reading/power/1&gt;</a></span><a href="http://www.cs.bath.ac.uk/dm4t/enliten/reading/power/1&gt; a &lt;https://w3id.org/seas/PowerQuantity&gt; , &lt;https://w3id.org/seas/Observation"> </a><span style="color: #F92672;"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/reading/power/1&gt; a &lt;https://w3id.org/seas/PowerQuantity&gt; , &lt;https://w3id.org/seas/Observation">a</a></span><a href="http://www.cs.bath.ac.uk/dm4t/enliten/reading/power/1&gt; a &lt;https://w3id.org/seas/PowerQuantity&gt; , &lt;https://w3id.org/seas/Observation"> </a><span style="color: #A6E22E;"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/reading/power/1&gt; a &lt;https://w3id.org/seas/PowerQuantity&gt; , &lt;https://w3id.org/seas/Observation">&lt;https://w3id.org/seas/PowerQuantity&gt;</a></span><a href="http://www.cs.bath.ac.uk/dm4t/enliten/reading/power/1&gt; a &lt;https://w3id.org/seas/PowerQuantity&gt; , &lt;https://w3id.org/seas/Observation"> </a><span style="color: #F92672;"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/reading/power/1&gt; a &lt;https://w3id.org/seas/PowerQuantity&gt; , &lt;https://w3id.org/seas/Observation">,</a></span><a href="http://www.cs.bath.ac.uk/dm4t/enliten/reading/power/1&gt; a &lt;https://w3id.org/seas/PowerQuantity&gt; , &lt;https://w3id.org/seas/Observation"> </a><span style="color: #A6E22E;"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/reading/power/1&gt; a &lt;https://w3id.org/seas/PowerQuantity&gt; , &lt;https://w3id.org/seas/Observation">&lt;https://w3id.org/seas/Observation&gt;</a></span> <span style="color: #F92672;">;</span>
  <span style="color: #A6E22E;"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/minValue&gt; &quot;0.0&quot;^^&lt;http://www.w3.org/2001/XMLSchema#float">&lt;http://www.cs.bath.ac.uk/dm4t/enliten/minValue&gt;</a></span><a href="http://www.cs.bath.ac.uk/dm4t/enliten/minValue&gt; &quot;0.0&quot;^^&lt;http://www.w3.org/2001/XMLSchema#float"> </a><span style="color: #E6DB74;"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/minValue&gt; &quot;0.0&quot;^^&lt;http://www.w3.org/2001/XMLSchema#float">"0.0"</a></span><span style="color: #F92672;"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/minValue&gt; &quot;0.0&quot;^^&lt;http://www.w3.org/2001/XMLSchema#float">^^</a></span><span style="color: #A6E22E;"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/minValue&gt; &quot;0.0&quot;^^&lt;http://www.w3.org/2001/XMLSchema#float">&lt;http://www.w3.org/2001/XMLSchema#float&gt;</a></span><span style="color: #75715E;"> ;</span>
  <span style="color: #A6E22E;"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/maxValue&gt; &quot;1339.0&quot;^^&lt;http://www.w3.org/2001/XMLSchema#float">&lt;http://www.cs.bath.ac.uk/dm4t/enliten/maxValue&gt;</a></span><a href="http://www.cs.bath.ac.uk/dm4t/enliten/maxValue&gt; &quot;1339.0&quot;^^&lt;http://www.w3.org/2001/XMLSchema#float"> </a><span style="color: #E6DB74;"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/maxValue&gt; &quot;1339.0&quot;^^&lt;http://www.w3.org/2001/XMLSchema#float">"1339.0"</a></span><span style="color: #F92672;"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/maxValue&gt; &quot;1339.0&quot;^^&lt;http://www.w3.org/2001/XMLSchema#float">^^</a></span><span style="color: #A6E22E;"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/maxValue&gt; &quot;1339.0&quot;^^&lt;http://www.w3.org/2001/XMLSchema#float">&lt;http://www.w3.org/2001/XMLSchema#float&gt;</a></span><span style="color: #75715E;"> ;</span>
  <span style="color: #A6E22E;"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/meanValue&gt; &quot;669.0&quot;^^&lt;http://www.w3.org/2001/XMLSchema#float">&lt;http://www.cs.bath.ac.uk/dm4t/enliten/meanValue&gt;</a></span><a href="http://www.cs.bath.ac.uk/dm4t/enliten/meanValue&gt; &quot;669.0&quot;^^&lt;http://www.w3.org/2001/XMLSchema#float"> </a><span style="color: #E6DB74;"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/meanValue&gt; &quot;669.0&quot;^^&lt;http://www.w3.org/2001/XMLSchema#float">"669.0"</a></span><span style="color: #F92672;"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/meanValue&gt; &quot;669.0&quot;^^&lt;http://www.w3.org/2001/XMLSchema#float">^^</a></span><span style="color: #A6E22E;"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/meanValue&gt; &quot;669.0&quot;^^&lt;http://www.w3.org/2001/XMLSchema#float">&lt;http://www.w3.org/2001/XMLSchema#float&gt;</a></span><span style="color: #75715E;"> ;</span>
  <span style="color: #A6E22E;"><a href="https://w3id.org/seas#measurementInstrument&gt; &lt;http://www.cs.bath.ac.uk/dm4t/enliten/sensor/8">&lt;https://w3id.org/seas#measurementInstrument&gt;</a></span><span style="color: #75715E;"><a href="https://w3id.org/seas#measurementInstrument&gt; &lt;http://www.cs.bath.ac.uk/dm4t/enliten/sensor/8"> </a></span><span style="color: #A6E22E;"><a href="https://w3id.org/seas#measurementInstrument&gt; &lt;http://www.cs.bath.ac.uk/dm4t/enliten/sensor/8">&lt;http://www.cs.bath.ac.uk/dm4t/enliten/sensor/8&gt;</a></span><span style="color: #75715E;"> ;</span>
  <span style="color: #A6E22E;"><a href="https://w3id.org/seas#measurementSite&gt; &lt;http://www.cs.bath.ac.uk/dm4t/enliten/device/8">&lt;https://w3id.org/seas#measurementSite&gt;</a></span><span style="color: #75715E;"><a href="https://w3id.org/seas#measurementSite&gt; &lt;http://www.cs.bath.ac.uk/dm4t/enliten/device/8"> </a></span><span style="color: #A6E22E;"><a href="https://w3id.org/seas#measurementSite&gt; &lt;http://www.cs.bath.ac.uk/dm4t/enliten/device/8">&lt;http://www.cs.bath.ac.uk/dm4t/enliten/device/8&gt;</a></span><span style="color: #75715E;"> ;</span>
  <span style="color: #A6E22E;"><a href="https://w3id.org/seas#measurementStart&gt; &quot;2013-04-16T07:20:00&quot;^^&lt;http://www.w3.org/2001/XMLSchema#dateTime">&lt;https://w3id.org/seas#measurementStart&gt;</a></span><span style="color: #75715E;"><a href="https://w3id.org/seas#measurementStart&gt; &quot;2013-04-16T07:20:00&quot;^^&lt;http://www.w3.org/2001/XMLSchema#dateTime"> "2013-04-16T07:20:00"</a></span><span style="color: #F92672;"><a href="https://w3id.org/seas#measurementStart&gt; &quot;2013-04-16T07:20:00&quot;^^&lt;http://www.w3.org/2001/XMLSchema#dateTime">^^</a></span><span style="color: #A6E22E;"><a href="https://w3id.org/seas#measurementStart&gt; &quot;2013-04-16T07:20:00&quot;^^&lt;http://www.w3.org/2001/XMLSchema#dateTime">&lt;http://www.w3.org/2001/XMLSchema#dateTime&gt;</a></span><span style="color: #75715E;"> ;</span>
  <span style="color: #A6E22E;"><a href="https://w3id.org/seas#measurementEnd&gt; &quot;2013-04-16T07:20:00&quot;^^&lt;http://www.w3.org/2001/XMLSchema#dateTime">&lt;https://w3id.org/seas#measurementEnd&gt;</a></span><span style="color: #75715E;"><a href="https://w3id.org/seas#measurementEnd&gt; &quot;2013-04-16T07:20:00&quot;^^&lt;http://www.w3.org/2001/XMLSchema#dateTime"> "2013-04-16T07:20:00"</a></span><span style="color: #F92672;"><a href="https://w3id.org/seas#measurementEnd&gt; &quot;2013-04-16T07:20:00&quot;^^&lt;http://www.w3.org/2001/XMLSchema#dateTime">^^</a></span><span style="color: #A6E22E;"><a href="https://w3id.org/seas#measurementEnd&gt; &quot;2013-04-16T07:20:00&quot;^^&lt;http://www.w3.org/2001/XMLSchema#dateTime">&lt;http://www.w3.org/2001/XMLSchema#dateTime&gt;</a></span><span style="color: #75715E;"> .</span>
</pre>
</div>

<p>
This RDF snippet expresses:
</p>

<ul class="org-ul">
<li>Power reading 1 is a power reading and observation</li>
<li>its minimum value is 0.0</li>
<li>its maximum value is 1339.0</li>
<li>its mean value is 669.0</li>
<li>the instrument used to measure it was sensor 8</li>
<li>it originated from device 8</li>
<li>the reading started and ended at 07:20am on April 16th, 2013</li>
</ul>

<p>
The beauty of RDF is the way it expresses data as a graph. This means that we should be able to query it without knowing too much about particular structure of the database its stored in. Contrast this with SQL, where one must know the exact layout of a database's tables in order to query it.
</p>

<p>
It also allows us to join graphs together, querying databases (known as <i>triple stores</i> in RDF parlance) from entirely separate locations with the same query. Querying across multiple datasets in this way is called <i>federated querying</i>.
</p>

<p>
Due to the expression of our data in terms of triples, we must query them with a special language called SPARQL. SPARQL resembles SQL on a superficial level, but it allows for much more expressive queries in terms of triples.
</p>
</div>

<div id="outline-container-org7c829f6" class="outline-3">
<h3 id="org7c829f6">The ENLITEN Dataset</h3>
<div class="outline-text-3" id="text-org7c829f6">
<p>
These SPARQL queries use the <a href="http://www.cs.bath.ac.uk/enliten/">ENLITEN</a> dataset gathered by the University of Bath. These data were gathered from 23 homes around the UK, taking readings on:
</p>

<ul class="org-ul">
<li>appliance power usage</li>
<li>gas usage</li>
<li>carbon dioxide levels</li>
<li>humidity levels</li>
<li>light levels inside the home</li>
<li>sound levels inside the home</li>
<li>temperature inside the home</li>
<li>motion data from inside the home</li>
</ul>

<p>
These data were originally gathered using sensors attached to Raspberry PIs, and stored in a mySQL database. In order for us to query them with SPARQL, we converted them into RDF triples to load into a Jena triple store (the process is described in <a href="http://mthompson.org/dm4t/triples.html">this blog post</a>). This allowed us to create a "SPARQL endpoint", a web service to which we can send SPARQL queries to retrieve our data.
</p>
</div>
</div>

<div id="outline-container-org7c87824" class="outline-3">
<h3 id="org7c87824">A General SPARQL Query</h3>
<div class="outline-text-3" id="text-org7c87824">
<p>
The most basic SPARQL query possible would be:
</p>

<p>
<i>"Get every subject, predicate and object in our datastore, and return them as "s", "p" and "o" variables. But we only want the first 10!"</i>
</p>

<p>
Here is how we express that as a SPARQL query:
</p>

<div class="org-src-container">
<pre class="src src-sparql"><span style="color: #F92672;">SELECT</span> <span style="color: #FD971F;">?subject</span> <span style="color: #FD971F;">?predicate</span> <span style="color: #FD971F;">?object</span>
<span style="color: #F92672;">WHERE</span> <span style="color: #AE81FF;">{</span> <span style="color: #FD971F;">?subject</span> <span style="color: #FD971F;">?predicate</span> <span style="color: #FD971F;">?object</span> <span style="color: #AE81FF;">}</span>
<span style="color: #F92672;">LIMIT</span> <span style="color: #AE81FF;">20</span>
</pre>
</div>

<p>
Certain keywords (SELECT and LIMIT) are used in much the same way as their SQL counterparts, but the naming of variables to be returned with the question mark (?) operator is new, as is their arrangement in triples. Once a user becomes familiar with SPARQL, it becomes a powerful, expressive and flexible way to query RDF triples. A good way to start learning the basics of SPARQL is with the Apache Jena <a href="https://jena.apache.org/tutorials/sparql.html">SPARQL tutorial</a>.
</p>

<p>
Sending the above query to our SPARQL endpoint located at <a href="http://mist.cs.bath.ac.uk/enliten/query">http://mist.cs.bath.ac.uk/enliten/query</a> returns the following 10 results:
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">s</th>
<th scope="col" class="org-left">p</th>
<th scope="col" class="org-left">o</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/2">http://www.cs.bath.ac.uk/dm4t/enliten/appliance/2</a></td>
<td class="org-left"><a href="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">http://www.w3.org/1999/02/22-rdf-syntax-ns#type</a></td>
<td class="org-left"><a href="https://w3id.org/seas/Appliance">https://w3id.org/seas/Appliance</a></td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/2">http://www.cs.bath.ac.uk/dm4t/enliten/appliance/2</a></td>
<td class="org-left"><a href="https://w3id.org/seas#contains">https://w3id.org/seas#contains</a></td>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/device/275">http://www.cs.bath.ac.uk/dm4t/enliten/device/275</a></td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/2">http://www.cs.bath.ac.uk/dm4t/enliten/appliance/2</a></td>
<td class="org-left"><a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a></td>
<td class="org-left">Kettle</td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/device/275">http://www.cs.bath.ac.uk/dm4t/enliten/device/275</a></td>
<td class="org-left"><a href="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">http://www.w3.org/1999/02/22-rdf-syntax-ns#type</a></td>
<td class="org-left"><a href="https://w3id.org/seas/Device">https://w3id.org/seas/Device</a></td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/device/275">http://www.cs.bath.ac.uk/dm4t/enliten/device/275</a></td>
<td class="org-left"><a href="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">http://www.w3.org/1999/02/22-rdf-syntax-ns#type</a></td>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/device/type/8">http://www.cs.bath.ac.uk/dm4t/enliten/device/type/8</a></td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/device/275">http://www.cs.bath.ac.uk/dm4t/enliten/device/275</a></td>
<td class="org-left"><a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a></td>
<td class="org-left">3ZU-V6Q-K3J-NVV-WV</td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/device/275">http://www.cs.bath.ac.uk/dm4t/enliten/device/275</a></td>
<td class="org-left"><a href="http://purl.org/dc/terms/description">http://purl.org/dc/terms/description</a></td>
<td class="org-left">A</td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/3">http://www.cs.bath.ac.uk/dm4t/enliten/appliance/3</a></td>
<td class="org-left"><a href="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">http://www.w3.org/1999/02/22-rdf-syntax-ns#type</a></td>
<td class="org-left"><a href="https://w3id.org/seas/Appliance">https://w3id.org/seas/Appliance</a></td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/3">http://www.cs.bath.ac.uk/dm4t/enliten/appliance/3</a></td>
<td class="org-left"><a href="https://w3id.org/seas#contains">https://w3id.org/seas#contains</a></td>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/device/276">http://www.cs.bath.ac.uk/dm4t/enliten/device/276</a></td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/3">http://www.cs.bath.ac.uk/dm4t/enliten/appliance/3</a></td>
<td class="org-left"><a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a></td>
<td class="org-left">Microwave</td>
</tr>
</tbody>
</table>

<p>
It is clear that these are the first ten triples of millions (1.25 billion, to be exact). What if we want to query just a sample of the data, in order to get just enough for a representative visualisation without having to process millions of results?
</p>
</div>
</div>

<div id="outline-container-orgdee7b05" class="outline-3">
<h3 id="orgdee7b05">Returning a Random Sample of Data</h3>
<div class="outline-text-3" id="text-orgdee7b05">
<p>
Let's try querying a subset of the data that returns millions of results: the humidity level readings. A good example query to try would be to get all humidity readings across all homes for April 2013.
</p>

<p>
A naive way to do this would be to order the data randomly and return a certain number of the randomly-ordered data:
</p>

<div class="org-src-container">
<pre class="src src-sparql"><span style="color: #F92672;">PREFIX</span> seas: <span style="color: #AE81FF;"><a href="https://w3id.org/seas/&gt;
PREFIX sear: &lt;https://w3id.org/seas#&gt;
PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">&lt;https://w3id.org/seas/&gt;</a></span><a href="https://w3id.org/seas/&gt;
PREFIX sear: &lt;https://w3id.org/seas#&gt;
PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">
</a><span style="color: #F92672;"><a href="https://w3id.org/seas/&gt;
PREFIX sear: &lt;https://w3id.org/seas#&gt;
PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">PREFIX</a></span><a href="https://w3id.org/seas/&gt;
PREFIX sear: &lt;https://w3id.org/seas#&gt;
PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#"> sear: </a><span style="color: #AE81FF;"><a href="https://w3id.org/seas/&gt;
PREFIX sear: &lt;https://w3id.org/seas#&gt;
PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">&lt;https://w3id.org/seas#&gt;</a></span><a href="https://w3id.org/seas/&gt;
PREFIX sear: &lt;https://w3id.org/seas#&gt;
PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">
</a><span style="color: #F92672;"><a href="https://w3id.org/seas/&gt;
PREFIX sear: &lt;https://w3id.org/seas#&gt;
PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">PREFIX</a></span><a href="https://w3id.org/seas/&gt;
PREFIX sear: &lt;https://w3id.org/seas#&gt;
PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#"> xsd: </a><span style="color: #AE81FF;"><a href="https://w3id.org/seas/&gt;
PREFIX sear: &lt;https://w3id.org/seas#&gt;
PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">&lt;http://www.w3.org/2001/XMLSchema#&gt;</a></span><a href="https://w3id.org/seas/&gt;
PREFIX sear: &lt;https://w3id.org/seas#&gt;
PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">
</a><span style="color: #F92672;"><a href="https://w3id.org/seas/&gt;
PREFIX sear: &lt;https://w3id.org/seas#&gt;
PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">PREFIX</a></span><a href="https://w3id.org/seas/&gt;
PREFIX sear: &lt;https://w3id.org/seas#&gt;
PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#"> rdf: </a><span style="color: #AE81FF;"><a href="https://w3id.org/seas/&gt;
PREFIX sear: &lt;https://w3id.org/seas#&gt;
PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</a></span>

<span style="color: #F92672;">SELECT</span> <span style="color: #FD971F;">?value</span> <span style="color: #FD971F;">?time</span>
<span style="color: #F92672;">WHERE</span> <span style="color: #AE81FF;">{</span>
        <span style="color: #FD971F;">?uri</span> rdf:type seas:RelativeHumidity;
              sear:value <span style="color: #FD971F;">?value</span>;
              sear:measurementStart <span style="color: #FD971F;">?time</span> .
        <span style="color: #F92672;">FILTER</span> <span style="color: #66D9EF;">(</span> month<span style="color: #A6E22E;">(</span><span style="color: #FD971F;">?time</span><span style="color: #A6E22E;">)</span> = <span style="color: #AE81FF;">4</span> &amp;&amp; year<span style="color: #A6E22E;">(</span><span style="color: #FD971F;">?time</span><span style="color: #A6E22E;">)</span> = <span style="color: #AE81FF;">2013</span> <span style="color: #66D9EF;">)</span>
      <span style="color: #AE81FF;">}</span>
<span style="color: #F92672;">ORDER</span> <span style="color: #F92672;">BY</span> RAND<span style="color: #AE81FF;">()</span>
<span style="color: #F92672;">LIMIT</span> <span style="color: #AE81FF;">25</span>
</pre>
</div>

<p>
However, this query will result in a timeout on most SPARQL endpoints, taking more than 10 minutes to return a result. This is because it must order our (potentially millions of) humidity readings randomly before returning 25 of them. This is too expensive. Can we do better?
</p>


<div class="org-src-container">
<pre class="src src-sparql"><span style="color: #F92672;">PREFIX</span> seas: <span style="color: #AE81FF;"><a href="https://w3id.org/seas/&gt;
 PREFIX sear: &lt;https://w3id.org/seas#&gt;
 PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
 PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">&lt;https://w3id.org/seas/&gt;</a></span><a href="https://w3id.org/seas/&gt;
 PREFIX sear: &lt;https://w3id.org/seas#&gt;
 PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
 PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">
 </a><span style="color: #F92672;"><a href="https://w3id.org/seas/&gt;
 PREFIX sear: &lt;https://w3id.org/seas#&gt;
 PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
 PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">PREFIX</a></span><a href="https://w3id.org/seas/&gt;
 PREFIX sear: &lt;https://w3id.org/seas#&gt;
 PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
 PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#"> sear: </a><span style="color: #AE81FF;"><a href="https://w3id.org/seas/&gt;
 PREFIX sear: &lt;https://w3id.org/seas#&gt;
 PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
 PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">&lt;https://w3id.org/seas#&gt;</a></span><a href="https://w3id.org/seas/&gt;
 PREFIX sear: &lt;https://w3id.org/seas#&gt;
 PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
 PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">
 </a><span style="color: #F92672;"><a href="https://w3id.org/seas/&gt;
 PREFIX sear: &lt;https://w3id.org/seas#&gt;
 PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
 PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">PREFIX</a></span><a href="https://w3id.org/seas/&gt;
 PREFIX sear: &lt;https://w3id.org/seas#&gt;
 PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
 PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#"> xsd: </a><span style="color: #AE81FF;"><a href="https://w3id.org/seas/&gt;
 PREFIX sear: &lt;https://w3id.org/seas#&gt;
 PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
 PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">&lt;http://www.w3.org/2001/XMLSchema#&gt;</a></span><a href="https://w3id.org/seas/&gt;
 PREFIX sear: &lt;https://w3id.org/seas#&gt;
 PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
 PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">
 </a><span style="color: #F92672;"><a href="https://w3id.org/seas/&gt;
 PREFIX sear: &lt;https://w3id.org/seas#&gt;
 PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
 PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">PREFIX</a></span><a href="https://w3id.org/seas/&gt;
 PREFIX sear: &lt;https://w3id.org/seas#&gt;
 PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
 PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#"> rdf: </a><span style="color: #AE81FF;"><a href="https://w3id.org/seas/&gt;
 PREFIX sear: &lt;https://w3id.org/seas#&gt;
 PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
 PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</a></span>

 <span style="color: #F92672;">SELECT</span> <span style="color: #FD971F;">?value</span> <span style="color: #FD971F;">?time</span> <span style="color: #FD971F;">?r</span>
 <span style="color: #F92672;">WHERE</span> <span style="color: #AE81FF;">{</span>
         <span style="color: #FD971F;">?uri</span> rdf:type seas:RelativeHumidity;
               sear:value <span style="color: #FD971F;">?value</span>;
               sear:measurementStart <span style="color: #FD971F;">?time</span> .
       <span style="color: #F92672;">BIND</span> <span style="color: #66D9EF;">(</span> rand<span style="color: #A6E22E;">()</span> <span style="color: #F92672;">AS</span> <span style="color: #FD971F;">?r</span> <span style="color: #66D9EF;">)</span>
       <span style="color: #F92672;">FILTER</span> <span style="color: #66D9EF;">(</span> <span style="color: #FD971F;">?r</span> &lt; <span style="color: #AE81FF;">0</span>.<span style="color: #AE81FF;">01</span> &amp;&amp; year<span style="color: #A6E22E;">(</span><span style="color: #FD971F;">?time</span><span style="color: #A6E22E;">)</span> = <span style="color: #AE81FF;">2013</span> &amp;&amp; month<span style="color: #A6E22E;">(</span><span style="color: #FD971F;">?time</span><span style="color: #A6E22E;">)</span> = <span style="color: #AE81FF;">4</span> <span style="color: #66D9EF;">)</span>
       <span style="color: #AE81FF;">}</span>
 <span style="color: #F92672;">LIMIT</span> <span style="color: #AE81FF;">1000</span>
</pre>
</div>

<p>
This query binds a random number to each result, then filters them down to only the results with random numbers below a certain threshold (0.01 in this case). This query will take too long and time out, however (with our server timeout threshold set to 30 seconds). This is because it is still going through every triple in the database, binding a random number to it, and also applying the filter comparators to find only the readings that match the month we want.
</p>

<p>
This is far too expensive! How can we make this more efficient?
</p>


<div class="org-src-container">
<pre class="src src-sparql"> <span style="color: #F92672;">PREFIX</span> seas: <span style="color: #AE81FF;"><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">&lt;https://w3id.org/seas/&gt;</a></span><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">
  </a><span style="color: #F92672;"><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">PREFIX</a></span><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#"> sear: </a><span style="color: #AE81FF;"><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">&lt;https://w3id.org/seas#&gt;</a></span><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">
  </a><span style="color: #F92672;"><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">PREFIX</a></span><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#"> xsd: </a><span style="color: #AE81FF;"><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">&lt;http://www.w3.org/2001/XMLSchema#&gt;</a></span><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">
  </a><span style="color: #F92672;"><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">PREFIX</a></span><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#"> rdf: </a><span style="color: #AE81FF;"><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#">&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</a></span>

<span style="color: #F92672;">SELECT</span> <span style="color: #FD971F;">?value</span> <span style="color: #FD971F;">?time</span> <span style="color: #FD971F;">?r</span>
<span style="color: #F92672;">WHERE</span> <span style="color: #AE81FF;">{</span>
  <span style="color: #66D9EF;">{</span>
  <span style="color: #F92672;">SELECT</span> <span style="color: #FD971F;">?value</span> <span style="color: #FD971F;">?time</span>
  <span style="color: #F92672;">WHERE</span> <span style="color: #A6E22E;">{</span>
          <span style="color: #FD971F;">?uri</span> rdf:type seas:RelativeHumidity;
                sear:value <span style="color: #FD971F;">?value</span>;
                sear:measurementStart <span style="color: #FD971F;">?time</span> .
  <span style="color: #F92672;">FILTER</span><span style="color: #E6DB74;">(</span> year<span style="color: #FD971F;">(</span><span style="color: #FD971F;">?time</span><span style="color: #FD971F;">)</span> = <span style="color: #AE81FF;">2014</span> &amp;&amp; month<span style="color: #FD971F;">(</span><span style="color: #FD971F;">?time</span><span style="color: #FD971F;">)</span> = <span style="color: #AE81FF;">1</span> <span style="color: #E6DB74;">)</span>
        <span style="color: #A6E22E;">}</span>
  <span style="color: #66D9EF;">}</span>
        <span style="color: #F92672;">BIND</span> <span style="color: #66D9EF;">(</span> rand<span style="color: #A6E22E;">()</span> <span style="color: #F92672;">AS</span> <span style="color: #FD971F;">?r</span> <span style="color: #66D9EF;">)</span>
        <span style="color: #F92672;">FILTER</span> <span style="color: #66D9EF;">(</span> <span style="color: #FD971F;">?r</span> &lt; <span style="color: #AE81FF;">0</span>.<span style="color: #AE81FF;">001</span> <span style="color: #66D9EF;">)</span>
<span style="color: #AE81FF;">}</span>
<span style="color: #F92672;">LIMIT</span> <span style="color: #AE81FF;">100</span>
</pre>
</div>

<p>
The above query first filters the data so that we only have the humidity readings from January 2014. Then it assigns a random number to each result, and filters those results so that only the random numbers below 0.001 are returned. Finally, we limit the results to 100 to show them in the following table:
</p>

<table>


<colgroup>
<col  class="org-right">

<col  class="org-left">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">value</th>
<th scope="col" class="org-left">time</th>
<th scope="col" class="org-right">r</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">35.0</td>
<td class="org-left">2014-01-02T00:05:10</td>
<td class="org-right">2.8322766466004623E-4</td>
</tr>

<tr>
<td class="org-right">36.0</td>
<td class="org-left">2014-01-02T20:45:05</td>
<td class="org-right">4.601868144032961E-4</td>
</tr>

<tr>
<td class="org-right">32.0</td>
<td class="org-left">2014-01-02T21:10:14</td>
<td class="org-right">8.132609329500884E-4</td>
</tr>

<tr>
<td class="org-right">30.0</td>
<td class="org-left">2014-01-03T03:35:09</td>
<td class="org-right">8.591418591802347E-4</td>
</tr>

<tr>
<td class="org-right">38.0</td>
<td class="org-left">2014-01-03T06:21:01</td>
<td class="org-right">9.060736738766284E-4</td>
</tr>

<tr>
<td class="org-right">26.0</td>
<td class="org-left">2014-01-03T22:20:16</td>
<td class="org-right">8.596794224369209E-4</td>
</tr>

<tr>
<td class="org-right">34.0</td>
<td class="org-left">2014-01-04T07:20:09</td>
<td class="org-right">4.487831413418908E-4</td>
</tr>

<tr>
<td class="org-right">56.0</td>
<td class="org-left">2014-01-05T02:55:08</td>
<td class="org-right">1.026092729500272E-4</td>
</tr>

<tr>
<td class="org-right">39.0</td>
<td class="org-left">2014-01-05T05:55:09</td>
<td class="org-right">9.590279442017735E-5</td>
</tr>

<tr>
<td class="org-right">32.0</td>
<td class="org-left">2014-01-05T11:25:06</td>
<td class="org-right">3.521631447538365E-4</td>
</tr>

<tr>
<td class="org-right">36.0</td>
<td class="org-left">2014-01-05T16:05:05</td>
<td class="org-right">9.316775287986356E-4</td>
</tr>

<tr>
<td class="org-right">35.0</td>
<td class="org-left">2014-01-05T18:15:09</td>
<td class="org-right">6.857756220918221E-4</td>
</tr>

<tr>
<td class="org-right">31.0</td>
<td class="org-left">2014-01-05T20:35:15</td>
<td class="org-right">6.319040832732936E-4</td>
</tr>

<tr>
<td class="org-right">39.0</td>
<td class="org-left">2014-01-06T03:45:11</td>
<td class="org-right">9.075765234803912E-4</td>
</tr>

<tr>
<td class="org-right">32.0</td>
<td class="org-left">2014-01-06T11:55:08</td>
<td class="org-right">1.9077939485623308E-4</td>
</tr>

<tr>
<td class="org-right">37.0</td>
<td class="org-left">2014-01-06T13:35:07</td>
<td class="org-right">5.061647786218648E-4</td>
</tr>

<tr>
<td class="org-right">36.0</td>
<td class="org-left">2014-01-06T20:05:09</td>
<td class="org-right">8.797623098150131E-4</td>
</tr>

<tr>
<td class="org-right">40.0</td>
<td class="org-left">2014-01-07T15:30:05</td>
<td class="org-right">2.420547496551073E-6</td>
</tr>

<tr>
<td class="org-right">61.0</td>
<td class="org-left">2014-01-08T12:45:06</td>
<td class="org-right">6.508380731595764E-5</td>
</tr>

<tr>
<td class="org-right">40.0</td>
<td class="org-left">2014-01-08T16:05:06</td>
<td class="org-right">6.731353735501822E-4</td>
</tr>

<tr>
<td class="org-right">63.0</td>
<td class="org-left">2014-01-08T17:30:12</td>
<td class="org-right">8.903736054207689E-4</td>
</tr>

<tr>
<td class="org-right">38.0</td>
<td class="org-left">2014-01-09T00:55:09</td>
<td class="org-right">5.864460369248148E-4</td>
</tr>

<tr>
<td class="org-right">65.0</td>
<td class="org-left">2014-01-09T02:20:07</td>
<td class="org-right">6.419733271380013E-4</td>
</tr>

<tr>
<td class="org-right">60.0</td>
<td class="org-left">2014-01-09T12:45:06</td>
<td class="org-right">1.7341391682856866E-4</td>
</tr>

<tr>
<td class="org-right">40.0</td>
<td class="org-left">2014-01-09T18:05:05</td>
<td class="org-right">6.639591887303009E-5</td>
</tr>

<tr>
<td class="org-right">36.0</td>
<td class="org-left">2014-01-09T21:05:04</td>
<td class="org-right">2.7681285290703794E-4</td>
</tr>

<tr>
<td class="org-right">34.0</td>
<td class="org-left">2014-01-10T00:40:08</td>
<td class="org-right">6.85223198533258E-5</td>
</tr>

<tr>
<td class="org-right">40.0</td>
<td class="org-left">2014-01-10T12:45:07</td>
<td class="org-right">3.4359669006067683E-4</td>
</tr>

<tr>
<td class="org-right">34.0</td>
<td class="org-left">2014-01-10T15:05:07</td>
<td class="org-right">5.470659489175134E-4</td>
</tr>

<tr>
<td class="org-right">35.0</td>
<td class="org-left">2014-01-10T21:10:07</td>
<td class="org-right">8.485163901100767E-4</td>
</tr>

<tr>
<td class="org-right">29.0</td>
<td class="org-left">2014-01-11T03:00:14</td>
<td class="org-right">2.947057897448868E-4</td>
</tr>

<tr>
<td class="org-right">29.0</td>
<td class="org-left">2014-01-11T03:50:11</td>
<td class="org-right">2.986511900227029E-4</td>
</tr>

<tr>
<td class="org-right">36.0</td>
<td class="org-left">2014-01-11T07:50:08</td>
<td class="org-right">6.53555096203351E-4</td>
</tr>

<tr>
<td class="org-right">27.0</td>
<td class="org-left">2014-01-11T13:45:08</td>
<td class="org-right">6.137402336661157E-4</td>
</tr>

<tr>
<td class="org-right">36.0</td>
<td class="org-left">2014-01-11T16:05:07</td>
<td class="org-right">3.273127376068885E-5</td>
</tr>

<tr>
<td class="org-right">43.0</td>
<td class="org-left">2014-01-12T04:20:08</td>
<td class="org-right">6.951243645735294E-4</td>
</tr>

<tr>
<td class="org-right">43.0</td>
<td class="org-left">2014-01-12T04:25:05</td>
<td class="org-right">7.425175356293723E-4</td>
</tr>

<tr>
<td class="org-right">26.0</td>
<td class="org-left">2014-01-12T11:55:57</td>
<td class="org-right">4.612326086619323E-4</td>
</tr>

<tr>
<td class="org-right">27.0</td>
<td class="org-left">2014-01-12T16:06:13</td>
<td class="org-right">5.28955550659238E-4</td>
</tr>

<tr>
<td class="org-right">32.0</td>
<td class="org-left">2014-01-13T20:55:06</td>
<td class="org-right">4.1139152687330593E-4</td>
</tr>

<tr>
<td class="org-right">43.0</td>
<td class="org-left">2014-01-14T06:30:06</td>
<td class="org-right">5.876203830592619E-4</td>
</tr>

<tr>
<td class="org-right">34.0</td>
<td class="org-left">2014-01-14T07:35:09</td>
<td class="org-right">1.5501776970738845E-5</td>
</tr>

<tr>
<td class="org-right">52.0</td>
<td class="org-left">2014-01-15T03:25:11</td>
<td class="org-right">7.79044558529618E-4</td>
</tr>

<tr>
<td class="org-right">37.0</td>
<td class="org-left">2014-01-15T20:00:09</td>
<td class="org-right">5.538244812035575E-4</td>
</tr>

<tr>
<td class="org-right">42.0</td>
<td class="org-left">2014-01-16T02:30:06</td>
<td class="org-right">7.839649762750867E-4</td>
</tr>

<tr>
<td class="org-right">50.0</td>
<td class="org-left">2014-01-16T17:35:10</td>
<td class="org-right">8.856445010158032E-4</td>
</tr>

<tr>
<td class="org-right">34.0</td>
<td class="org-left">2014-01-16T20:55:09</td>
<td class="org-right">9.627708452097927E-4</td>
</tr>

<tr>
<td class="org-right">47.0</td>
<td class="org-left">2014-01-16T23:50:09</td>
<td class="org-right">3.442595044020891E-4</td>
</tr>

<tr>
<td class="org-right">30.0</td>
<td class="org-left">2014-01-17T04:40:06</td>
<td class="org-right">9.214721164364503E-4</td>
</tr>

<tr>
<td class="org-right">28.0</td>
<td class="org-left">2014-01-17T05:25:12</td>
<td class="org-right">6.275974406071416E-4</td>
</tr>

<tr>
<td class="org-right">33.0</td>
<td class="org-left">2014-01-17T06:00:07</td>
<td class="org-right">9.308123539838453E-4</td>
</tr>

<tr>
<td class="org-right">28.0</td>
<td class="org-left">2014-01-19T17:20:04</td>
<td class="org-right">5.632737511830355E-4</td>
</tr>

<tr>
<td class="org-right">37.0</td>
<td class="org-left">2014-01-20T18:15:03</td>
<td class="org-right">8.584575972837571E-4</td>
</tr>

<tr>
<td class="org-right">23.0</td>
<td class="org-left">2014-01-21T09:00:08</td>
<td class="org-right">6.355172988836699E-4</td>
</tr>

<tr>
<td class="org-right">42.0</td>
<td class="org-left">2014-01-21T17:15:08</td>
<td class="org-right">4.950288259149005E-4</td>
</tr>

<tr>
<td class="org-right">47.0</td>
<td class="org-left">2014-01-21T19:35:11</td>
<td class="org-right">3.518174918257788E-4</td>
</tr>

<tr>
<td class="org-right">42.0</td>
<td class="org-left">2014-01-22T04:35:07</td>
<td class="org-right">8.483287254245075E-4</td>
</tr>

<tr>
<td class="org-right">27.0</td>
<td class="org-left">2014-01-22T09:55:13</td>
<td class="org-right">5.96095139709929E-4</td>
</tr>

<tr>
<td class="org-right">40.0</td>
<td class="org-left">2014-01-22T11:25:13</td>
<td class="org-right">5.231280217328216E-4</td>
</tr>

<tr>
<td class="org-right">40.0</td>
<td class="org-left">2014-01-23T00:35:08</td>
<td class="org-right">2.392805430497802E-4</td>
</tr>

<tr>
<td class="org-right">28.0</td>
<td class="org-left">2014-01-23T00:45:10</td>
<td class="org-right">9.727079686323581E-4</td>
</tr>

<tr>
<td class="org-right">29.0</td>
<td class="org-left">2014-01-23T01:35:13</td>
<td class="org-right">3.247227225061655E-4</td>
</tr>

<tr>
<td class="org-right">41.0</td>
<td class="org-left">2014-01-23T05:40:05</td>
<td class="org-right">3.4068789649155384E-4</td>
</tr>

<tr>
<td class="org-right">38.0</td>
<td class="org-left">2014-01-23T10:00:13</td>
<td class="org-right">5.141512757136368E-4</td>
</tr>

<tr>
<td class="org-right">35.0</td>
<td class="org-left">2014-01-23T12:00:06</td>
<td class="org-right">3.1720147036384816E-4</td>
</tr>

<tr>
<td class="org-right">46.0</td>
<td class="org-left">2014-01-23T23:15:06</td>
<td class="org-right">6.17720012774936E-4</td>
</tr>

<tr>
<td class="org-right">49.0</td>
<td class="org-left">2014-01-24T00:40:10</td>
<td class="org-right">2.8276711642638563E-4</td>
</tr>

<tr>
<td class="org-right">40.0</td>
<td class="org-left">2014-01-24T01:45:05</td>
<td class="org-right">4.964913989609077E-4</td>
</tr>

<tr>
<td class="org-right">37.0</td>
<td class="org-left">2014-01-24T03:15:06</td>
<td class="org-right">8.922096934100843E-4</td>
</tr>

<tr>
<td class="org-right">46.0</td>
<td class="org-left">2014-01-24T10:20:08</td>
<td class="org-right">4.2194473487922046E-4</td>
</tr>

<tr>
<td class="org-right">40.0</td>
<td class="org-left">2014-01-24T10:20:13</td>
<td class="org-right">5.096783784465098E-4</td>
</tr>

<tr>
<td class="org-right">34.0</td>
<td class="org-left">2014-01-24T12:40:09</td>
<td class="org-right">3.222631851128588E-4</td>
</tr>

<tr>
<td class="org-right">30.0</td>
<td class="org-left">2014-01-24T13:35:17</td>
<td class="org-right">8.866756008862886E-5</td>
</tr>

<tr>
<td class="org-right">32.0</td>
<td class="org-left">2014-01-24T19:00:10</td>
<td class="org-right">6.20408142798401E-4</td>
</tr>

<tr>
<td class="org-right">31.0</td>
<td class="org-left">2014-01-24T21:20:12</td>
<td class="org-right">6.274575884074318E-4</td>
</tr>

<tr>
<td class="org-right">50.0</td>
<td class="org-left">2014-01-25T01:20:04</td>
<td class="org-right">5.519610024051769E-5</td>
</tr>

<tr>
<td class="org-right">26.0</td>
<td class="org-left">2014-01-25T07:40:14</td>
<td class="org-right">8.388070009690551E-7</td>
</tr>

<tr>
<td class="org-right">36.0</td>
<td class="org-left">2014-01-25T12:01:08</td>
<td class="org-right">8.57608120524711E-5</td>
</tr>

<tr>
<td class="org-right">33.0</td>
<td class="org-left">2014-01-25T08:31:07</td>
<td class="org-right">7.940288132642914E-4</td>
</tr>

<tr>
<td class="org-right">24.0</td>
<td class="org-left">2014-01-25T15:20:06</td>
<td class="org-right">6.1099587937119E-4</td>
</tr>

<tr>
<td class="org-right">26.0</td>
<td class="org-left">2014-01-25T12:12:11</td>
<td class="org-right">9.63437031454073E-4</td>
</tr>

<tr>
<td class="org-right">33.0</td>
<td class="org-left">2014-01-25T18:10:08</td>
<td class="org-right">1.1161702391981887E-4</td>
</tr>

<tr>
<td class="org-right">35.0</td>
<td class="org-left">2014-01-25T20:40:04</td>
<td class="org-right">8.911383979124388E-4</td>
</tr>

<tr>
<td class="org-right">35.0</td>
<td class="org-left">2014-01-25T21:30:12</td>
<td class="org-right">9.688857201561873E-4</td>
</tr>

<tr>
<td class="org-right">29.0</td>
<td class="org-left">2014-01-26T00:25:08</td>
<td class="org-right">3.6608364935408755E-4</td>
</tr>

<tr>
<td class="org-right">43.0</td>
<td class="org-left">2014-01-26T02:05:07</td>
<td class="org-right">3.679905533462424E-4</td>
</tr>

<tr>
<td class="org-right">47.0</td>
<td class="org-left">2014-01-26T08:35:12</td>
<td class="org-right">7.259037407786328E-4</td>
</tr>

<tr>
<td class="org-right">39.0</td>
<td class="org-left">2014-01-26T09:15:14</td>
<td class="org-right">4.8596172752324307E-4</td>
</tr>

<tr>
<td class="org-right">40.0</td>
<td class="org-left">2014-01-26T17:30:07</td>
<td class="org-right">4.8101548431045416E-6</td>
</tr>

<tr>
<td class="org-right">40.0</td>
<td class="org-left">2014-01-26T19:25:06</td>
<td class="org-right">5.523523046824241E-5</td>
</tr>

<tr>
<td class="org-right">39.0</td>
<td class="org-left">2014-01-27T02:25:10</td>
<td class="org-right">8.393601802924033E-4</td>
</tr>

<tr>
<td class="org-right">40.0</td>
<td class="org-left">2014-01-27T02:35:07</td>
<td class="org-right">9.566105571912065E-4</td>
</tr>

<tr>
<td class="org-right">42.0</td>
<td class="org-left">2014-01-27T05:25:06</td>
<td class="org-right">1.2014326561415878E-4</td>
</tr>

<tr>
<td class="org-right">42.0</td>
<td class="org-left">2014-01-27T06:35:11</td>
<td class="org-right">8.720766357539489E-5</td>
</tr>

<tr>
<td class="org-right">31.0</td>
<td class="org-left">2014-01-27T10:05:12</td>
<td class="org-right">4.22383960900774E-5</td>
</tr>

<tr>
<td class="org-right">33.0</td>
<td class="org-left">2014-01-27T10:30:09</td>
<td class="org-right">9.176846284034701E-4</td>
</tr>

<tr>
<td class="org-right">31.0</td>
<td class="org-left">2014-01-27T12:10:13</td>
<td class="org-right">3.71034675041626E-4</td>
</tr>

<tr>
<td class="org-right">35.0</td>
<td class="org-left">2014-01-27T12:25:11</td>
<td class="org-right">2.9767609927167094E-4</td>
</tr>

<tr>
<td class="org-right">29.0</td>
<td class="org-left">2014-01-27T21:45:09</td>
<td class="org-right">9.749017723319486E-4</td>
</tr>

<tr>
<td class="org-right">37.0</td>
<td class="org-left">2014-01-27T23:20:07</td>
<td class="org-right">4.7436378403353796E-4</td>
</tr>
</tbody>
</table>


<p>
As you can see, we have a nice spread of results over the entirety of the month of January. The "threshold" value of 0.001 determines the number of random samples that the query returns. In this case, it is about 100. Setting the threshold to 0.01 returns about 1000 results, but the query takes longer to complete. Here is a plot of the combined humidity readings for all enliten homes in January 2013, with the LIMIT set to 1000 and random sample threshold raised to 0.01:
</p>


<figure>
<p><img src="img/jan-hums.png" alt="jan-hums.png">
</p>
</figure>

<p>
And here are all humidities for the month of April, for all homes (100 random samples):
</p>


<figure>
<p><img src="img/april-hums.png" alt="april-hums.png">
</p>
</figure>

<p>
This random sampling method is orders of magnitude faster than the ORDER BY RAND() method, returning our results in under 2 seconds.
</p>
</div>
</div>

<div id="outline-container-org6a5d50a" class="outline-3">
<h3 id="org6a5d50a">Federated</h3>
<div class="outline-text-3" id="text-org6a5d50a">
</div><div id="outline-container-org8187e57" class="outline-4">
<h4 id="org8187e57">General</h4>
<div class="outline-text-4" id="text-org8187e57">
<p>
One of the main goals of our project is to query across multiple datasets at once. We can test this out by querying the <a href="https://pure.strath.ac.uk/portal/en/datasets/refit-electrical-load-measurements(31da3ece-f902-4e95-a093-e0a9536983c4).html">REFIT</a> dataset from the University of Strathclyde.
</p>

<p>
We've converted this data from the CSV source to RDF triples, using the same ontology as the ENLITEN dataset (the SEAS ontology), and put them on a separate SPARQL endpoint called "refit".
</p>

<p>
The following query gets the first 20 triples out of both SPARQL endpoints and joins them together:
</p>

<div class="org-src-container">
<pre class="src src-sparql"> <span style="color: #F92672;">SELECT</span> <span style="color: #FD971F;">?s</span> <span style="color: #FD971F;">?p</span> <span style="color: #FD971F;">?o</span> <span style="color: #AE81FF;">{</span>
   <span style="color: #66D9EF;">{</span> <span style="color: #F92672;">SERVICE</span> <span style="color: #AE81FF;"><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query">&lt;http://mist.cs.bath.ac.uk/enliten/query&gt;</a></span><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query">
       </a><span style="color: #A6E22E;"><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query">{</a></span><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query"> </a><span style="color: #F92672;"><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query">SELECT</a></span><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query"> </a><span style="color: #FD971F;"><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query">?s</a></span><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query"> </a><span style="color: #FD971F;"><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query">?p</a></span><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query"> </a><span style="color: #FD971F;"><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query">?o</a></span><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query"> </a><span style="color: #F92672;"><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query">WHERE</a></span><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query">
                           </a><span style="color: #E6DB74;"><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query">{</a></span><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query"> </a><span style="color: #FD971F;"><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query">?s</a></span><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query"> </a><span style="color: #FD971F;"><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query">?p</a></span><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query"> </a><span style="color: #FD971F;"><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query">?o</a></span><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query"> </a><span style="color: #E6DB74;"><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query">}</a></span><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query">
                           </a><span style="color: #F92672;"><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query">LIMIT</a></span><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query"> </a><span style="color: #AE81FF;"><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query">20</a></span><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query"> </a><span style="color: #A6E22E;"><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query">}</a></span><span style="color: #66D9EF;"><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query">}</a></span><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query">
   </a><span style="color: #F92672;"><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query">UNION</a></span><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query">
   </a><span style="color: #66D9EF;"><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query">{</a></span><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query"> </a><span style="color: #F92672;"><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query">SERVICE</a></span><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query"> </a><span style="color: #AE81FF;"><a href="http://mist.cs.bath.ac.uk/enliten/query&gt;
       { SELECT ?s ?p ?o WHERE
                           { ?s ?p ?o }
                           LIMIT 20 }}
   UNION
   { SERVICE &lt;http://mist.cs.bath.ac.uk/refit/query">&lt;http://mist.cs.bath.ac.uk/refit/query&gt;</a></span>
       <span style="color: #A6E22E;">{</span> <span style="color: #F92672;">SELECT</span> <span style="color: #FD971F;">?s</span> <span style="color: #FD971F;">?p</span> <span style="color: #FD971F;">?o</span> <span style="color: #F92672;">WHERE</span>
                           <span style="color: #E6DB74;">{</span> <span style="color: #FD971F;">?s</span> <span style="color: #FD971F;">?p</span> <span style="color: #FD971F;">?o</span> <span style="color: #E6DB74;">}</span>
                           <span style="color: #F92672;">LIMIT</span> <span style="color: #AE81FF;">20</span> <span style="color: #A6E22E;">}</span><span style="color: #66D9EF;">}</span>
<span style="color: #AE81FF;">}</span>
</pre>
</div>

<p>
With the following results:
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">s</th>
<th scope="col" class="org-left">p</th>
<th scope="col" class="org-left">o</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/2">http://www.cs.bath.ac.uk/dm4t/enliten/appliance/2</a></td>
<td class="org-left"><a href="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">http://www.w3.org/1999/02/22-rdf-syntax-ns#type</a></td>
<td class="org-left"><a href="https://w3id.org/seas/Appliance">https://w3id.org/seas/Appliance</a></td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/2">http://www.cs.bath.ac.uk/dm4t/enliten/appliance/2</a></td>
<td class="org-left"><a href="https://w3id.org/seas#contains">https://w3id.org/seas#contains</a></td>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/device/275">http://www.cs.bath.ac.uk/dm4t/enliten/device/275</a></td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/2">http://www.cs.bath.ac.uk/dm4t/enliten/appliance/2</a></td>
<td class="org-left"><a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a></td>
<td class="org-left">Kettle</td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/device/275">http://www.cs.bath.ac.uk/dm4t/enliten/device/275</a></td>
<td class="org-left"><a href="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">http://www.w3.org/1999/02/22-rdf-syntax-ns#type</a></td>
<td class="org-left"><a href="https://w3id.org/seas/Device">https://w3id.org/seas/Device</a></td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/device/275">http://www.cs.bath.ac.uk/dm4t/enliten/device/275</a></td>
<td class="org-left"><a href="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">http://www.w3.org/1999/02/22-rdf-syntax-ns#type</a></td>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/device/type/8">http://www.cs.bath.ac.uk/dm4t/enliten/device/type/8</a></td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/device/275">http://www.cs.bath.ac.uk/dm4t/enliten/device/275</a></td>
<td class="org-left"><a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a></td>
<td class="org-left">3ZU-V6Q-K3J-NVV-WV</td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/device/275">http://www.cs.bath.ac.uk/dm4t/enliten/device/275</a></td>
<td class="org-left"><a href="http://purl.org/dc/terms/description">http://purl.org/dc/terms/description</a></td>
<td class="org-left">A</td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/3">http://www.cs.bath.ac.uk/dm4t/enliten/appliance/3</a></td>
<td class="org-left"><a href="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">http://www.w3.org/1999/02/22-rdf-syntax-ns#type</a></td>
<td class="org-left"><a href="https://w3id.org/seas/Appliance">https://w3id.org/seas/Appliance</a></td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/3">http://www.cs.bath.ac.uk/dm4t/enliten/appliance/3</a></td>
<td class="org-left"><a href="https://w3id.org/seas#contains">https://w3id.org/seas#contains</a></td>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/device/276">http://www.cs.bath.ac.uk/dm4t/enliten/device/276</a></td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/3">http://www.cs.bath.ac.uk/dm4t/enliten/appliance/3</a></td>
<td class="org-left"><a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a></td>
<td class="org-left">Microwave</td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/device/276">http://www.cs.bath.ac.uk/dm4t/enliten/device/276</a></td>
<td class="org-left"><a href="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">http://www.w3.org/1999/02/22-rdf-syntax-ns#type</a></td>
<td class="org-left"><a href="https://w3id.org/seas/Device">https://w3id.org/seas/Device</a></td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/device/276">http://www.cs.bath.ac.uk/dm4t/enliten/device/276</a></td>
<td class="org-left"><a href="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">http://www.w3.org/1999/02/22-rdf-syntax-ns#type</a></td>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/device/type/8">http://www.cs.bath.ac.uk/dm4t/enliten/device/type/8</a></td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/device/276">http://www.cs.bath.ac.uk/dm4t/enliten/device/276</a></td>
<td class="org-left"><a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a></td>
<td class="org-left">3ZU-V6V-Y3J-NVI-H2</td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/device/276">http://www.cs.bath.ac.uk/dm4t/enliten/device/276</a></td>
<td class="org-left"><a href="http://purl.org/dc/terms/description">http://purl.org/dc/terms/description</a></td>
<td class="org-left">B</td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/4">http://www.cs.bath.ac.uk/dm4t/enliten/appliance/4</a></td>
<td class="org-left"><a href="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">http://www.w3.org/1999/02/22-rdf-syntax-ns#type</a></td>
<td class="org-left"><a href="https://w3id.org/seas/Appliance">https://w3id.org/seas/Appliance</a></td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/4">http://www.cs.bath.ac.uk/dm4t/enliten/appliance/4</a></td>
<td class="org-left"><a href="https://w3id.org/seas#contains">https://w3id.org/seas#contains</a></td>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/device/277">http://www.cs.bath.ac.uk/dm4t/enliten/device/277</a></td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/appliance/4">http://www.cs.bath.ac.uk/dm4t/enliten/appliance/4</a></td>
<td class="org-left"><a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a></td>
<td class="org-left">Washing Machine</td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/device/277">http://www.cs.bath.ac.uk/dm4t/enliten/device/277</a></td>
<td class="org-left"><a href="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">http://www.w3.org/1999/02/22-rdf-syntax-ns#type</a></td>
<td class="org-left"><a href="https://w3id.org/seas/Device">https://w3id.org/seas/Device</a></td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/device/277">http://www.cs.bath.ac.uk/dm4t/enliten/device/277</a></td>
<td class="org-left"><a href="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">http://www.w3.org/1999/02/22-rdf-syntax-ns#type</a></td>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/device/type/8">http://www.cs.bath.ac.uk/dm4t/enliten/device/type/8</a></td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/enliten/device/277">http://www.cs.bath.ac.uk/dm4t/enliten/device/277</a></td>
<td class="org-left"><a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a></td>
<td class="org-left">3ZU-VDN-W3J-NWG-4N</td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/refit/home/house_10/Appliance1">http://www.cs.bath.ac.uk/dm4t/refit/home/house_10/Appliance1</a></td>
<td class="org-left"><a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a></td>
<td class="org-left">Magimix (Blender)</td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/refit/home/house_10/Appliance2">http://www.cs.bath.ac.uk/dm4t/refit/home/house_10/Appliance2</a></td>
<td class="org-left"><a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a></td>
<td class="org-left">Freezer</td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/refit/home/house_10/Appliance3">http://www.cs.bath.ac.uk/dm4t/refit/home/house_10/Appliance3</a></td>
<td class="org-left"><a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a></td>
<td class="org-left">Chest Freezer (In Garage)</td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/refit/home/house_10/Appliance4">http://www.cs.bath.ac.uk/dm4t/refit/home/house_10/Appliance4</a></td>
<td class="org-left"><a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a></td>
<td class="org-left">Fridge-Freezer</td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/refit/home/house_10/Appliance5">http://www.cs.bath.ac.uk/dm4t/refit/home/house_10/Appliance5</a></td>
<td class="org-left"><a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a></td>
<td class="org-left">Washing Machine</td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/refit/home/house_10/Appliance6">http://www.cs.bath.ac.uk/dm4t/refit/home/house_10/Appliance6</a></td>
<td class="org-left"><a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a></td>
<td class="org-left">Dishwasher</td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/refit/home/house_10/Appliance7">http://www.cs.bath.ac.uk/dm4t/refit/home/house_10/Appliance7</a></td>
<td class="org-left"><a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a></td>
<td class="org-left">Television Site</td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/refit/home/house_10/Appliance8">http://www.cs.bath.ac.uk/dm4t/refit/home/house_10/Appliance8</a></td>
<td class="org-left"><a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a></td>
<td class="org-left">Microwave</td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/refit/home/house_10/Appliance9">http://www.cs.bath.ac.uk/dm4t/refit/home/house_10/Appliance9</a></td>
<td class="org-left"><a href="http://www.w3.org/2000/01/rdf-schema#label">http://www.w3.org/2000/01/rdf-schema#label</a></td>
<td class="org-left">Kenwood KMix</td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/refit/reading/15998574">http://www.cs.bath.ac.uk/dm4t/refit/reading/15998574</a></td>
<td class="org-left"><a href="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">http://www.w3.org/1999/02/22-rdf-syntax-ns#type</a></td>
<td class="org-left"><a href="https://w3id.org/seas/Observation">https://w3id.org/seas/Observation</a></td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/refit/reading/15998574">http://www.cs.bath.ac.uk/dm4t/refit/reading/15998574</a></td>
<td class="org-left"><a href="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">http://www.w3.org/1999/02/22-rdf-syntax-ns#type</a></td>
<td class="org-left"><a href="https://w3id.org/seas/PowerQuantity">https://w3id.org/seas/PowerQuantity</a></td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/refit/reading/15998574">http://www.cs.bath.ac.uk/dm4t/refit/reading/15998574</a></td>
<td class="org-left"><a href="http://purl.oclc.org/NET/ssnx/ssn#hasLocation">http://purl.oclc.org/NET/ssnx/ssn#hasLocation</a></td>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/refit/home/house_10">http://www.cs.bath.ac.uk/dm4t/refit/home/house_10</a></td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/refit/reading/15998574">http://www.cs.bath.ac.uk/dm4t/refit/reading/15998574</a></td>
<td class="org-left"><a href="https://w3id.org/seas#value">https://w3id.org/seas#value</a></td>
<td class="org-left">70</td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/refit/reading/15998574">http://www.cs.bath.ac.uk/dm4t/refit/reading/15998574</a></td>
<td class="org-left"><a href="https://w3id.org/seas#measurementStart">https://w3id.org/seas#measurementStart</a></td>
<td class="org-left">2013-11-20T11:31:18</td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/refit/reading/15998574">http://www.cs.bath.ac.uk/dm4t/refit/reading/15998574</a></td>
<td class="org-left"><a href="https://w3id.org/seas#measurementSite">https://w3id.org/seas#measurementSite</a></td>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/refit/home/house_10/Appliance2">http://www.cs.bath.ac.uk/dm4t/refit/home/house_10/Appliance2</a></td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/refit/reading/15998575">http://www.cs.bath.ac.uk/dm4t/refit/reading/15998575</a></td>
<td class="org-left"><a href="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">http://www.w3.org/1999/02/22-rdf-syntax-ns#type</a></td>
<td class="org-left"><a href="https://w3id.org/seas/Observation">https://w3id.org/seas/Observation</a></td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/refit/reading/15998575">http://www.cs.bath.ac.uk/dm4t/refit/reading/15998575</a></td>
<td class="org-left"><a href="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">http://www.w3.org/1999/02/22-rdf-syntax-ns#type</a></td>
<td class="org-left"><a href="https://w3id.org/seas/PowerQuantity">https://w3id.org/seas/PowerQuantity</a></td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/refit/reading/15998575">http://www.cs.bath.ac.uk/dm4t/refit/reading/15998575</a></td>
<td class="org-left"><a href="http://purl.oclc.org/NET/ssnx/ssn#hasLocation">http://purl.oclc.org/NET/ssnx/ssn#hasLocation</a></td>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/refit/home/house_10">http://www.cs.bath.ac.uk/dm4t/refit/home/house_10</a></td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/refit/reading/15998575">http://www.cs.bath.ac.uk/dm4t/refit/reading/15998575</a></td>
<td class="org-left"><a href="https://w3id.org/seas#value">https://w3id.org/seas#value</a></td>
<td class="org-left">2</td>
</tr>

<tr>
<td class="org-left"><a href="http://www.cs.bath.ac.uk/dm4t/refit/reading/15998575">http://www.cs.bath.ac.uk/dm4t/refit/reading/15998575</a></td>
<td class="org-left"><a href="https://w3id.org/seas#measurementStart">https://w3id.org/seas#measurementStart</a></td>
<td class="org-left">2013-11-20T11:31:18</td>
</tr>
</tbody>
</table>


<p>
This is quite nice, but what would be even better would be to get the combined power usage for all houses for January 2014:
</p>


<div class="org-src-container">
<pre class="src src-sparql"> <span style="color: #F92672;">PREFIX</span> seas: <span style="color: #AE81FF;"><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query">&lt;https://w3id.org/seas/&gt;</a></span><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query">
  </a><span style="color: #F92672;"><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query">PREFIX</a></span><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query"> sear: </a><span style="color: #AE81FF;"><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query">&lt;https://w3id.org/seas#&gt;</a></span><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query">
  </a><span style="color: #F92672;"><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query">PREFIX</a></span><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query"> xsd: </a><span style="color: #AE81FF;"><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query">&lt;http://www.w3.org/2001/XMLSchema#&gt;</a></span><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query">
  </a><span style="color: #F92672;"><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query">PREFIX</a></span><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query"> rdf: </a><span style="color: #AE81FF;"><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query">&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</a></span><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query">
  </a><span style="color: #F92672;"><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query">PREFIX</a></span><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query"> enliten: </a><span style="color: #AE81FF;"><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query">&lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;</a></span><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query">


</a><span style="color: #F92672;"><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query">SELECT</a></span><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query"> </a><span style="color: #FD971F;"><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query">?uri</a></span><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query"> </a><span style="color: #FD971F;"><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query">?value</a></span><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query"> </a><span style="color: #FD971F;"><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query">?time</a></span><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query"> </a><span style="color: #AE81FF;"><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query">{</a></span><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query">
</a><span style="color: #66D9EF;"><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query">{</a></span><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query"> </a><span style="color: #F92672;"><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query">SERVICE</a></span><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query"> </a><span style="color: #AE81FF;"><a href="https://w3id.org/seas/&gt;
  PREFIX sear: &lt;https://w3id.org/seas#&gt;
  PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
  PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
  PREFIX enliten: &lt;http://www.cs.bath.ac.uk/dm4t/enliten/&gt;


SELECT ?uri ?value ?time {
{ SERVICE &lt;http://mist.cs.bath.ac.uk/enliten/query">&lt;http://mist.cs.bath.ac.uk/enliten/query&gt;</a></span>
<span style="color: #A6E22E;">{</span> <span style="color: #F92672;">SELECT</span> <span style="color: #FD971F;">?value</span> <span style="color: #FD971F;">?time</span> <span style="color: #FD971F;">?r</span> <span style="color: #FD971F;">?uri</span>
<span style="color: #F92672;">WHERE</span> <span style="color: #E6DB74;">{</span>
  <span style="color: #FD971F;">{</span>
  <span style="color: #F92672;">SELECT</span> <span style="color: #FD971F;">?value</span> <span style="color: #FD971F;">?time</span> <span style="color: #FD971F;">?uri</span>
  <span style="color: #F92672;">WHERE</span> <span style="color: #F92672;">{</span>
          <span style="color: #FD971F;">?uri</span> rdf:type seas:PowerQuantity;
                enliten:meanValue <span style="color: #FD971F;">?value</span>;
                sear:measurementStart <span style="color: #FD971F;">?time</span> .
  <span style="color: #F92672;">FILTER</span><span style="color: #AE81FF;">(</span> year<span style="color: #66D9EF;">(</span><span style="color: #FD971F;">?time</span><span style="color: #66D9EF;">)</span> = <span style="color: #AE81FF;">2014</span> &amp;&amp; month<span style="color: #66D9EF;">(</span><span style="color: #FD971F;">?time</span><span style="color: #66D9EF;">)</span> = <span style="color: #AE81FF;">1</span> <span style="color: #AE81FF;">)</span>
        <span style="color: #F92672;">}</span>
  <span style="color: #FD971F;">}</span>
        <span style="color: #F92672;">BIND</span> <span style="color: #FD971F;">(</span> rand<span style="color: #F92672;">()</span> <span style="color: #F92672;">AS</span> <span style="color: #FD971F;">?r</span> <span style="color: #FD971F;">)</span>
        <span style="color: #F92672;">FILTER</span> <span style="color: #FD971F;">(</span> <span style="color: #FD971F;">?r</span> &lt; <span style="color: #AE81FF;">0</span>.<span style="color: #AE81FF;">01</span> <span style="color: #FD971F;">)</span>
<span style="color: #E6DB74;">}</span>
<span style="color: #F92672;">LIMIT</span> <span style="color: #AE81FF;">100</span> <span style="color: #A6E22E;">}</span><span style="color: #66D9EF;">}</span>
<span style="color: #F92672;">UNION</span>
<span style="color: #66D9EF;">{</span><span style="color: #F92672;">SERVICE</span> <span style="color: #AE81FF;"><a href="http://mist.cs.bath.ac.uk/refit/query">&lt;http://mist.cs.bath.ac.uk/refit/query&gt;</a></span>
<span style="color: #A6E22E;">{</span> <span style="color: #F92672;">SELECT</span> <span style="color: #FD971F;">?value</span> <span style="color: #FD971F;">?time</span> <span style="color: #FD971F;">?r</span> <span style="color: #FD971F;">?uri</span>
<span style="color: #F92672;">WHERE</span> <span style="color: #E6DB74;">{</span>
  <span style="color: #FD971F;">{</span>
  <span style="color: #F92672;">SELECT</span> <span style="color: #FD971F;">?value</span> <span style="color: #FD971F;">?time</span> <span style="color: #FD971F;">?uri</span>
  <span style="color: #F92672;">WHERE</span> <span style="color: #F92672;">{</span>
          <span style="color: #FD971F;">?uri</span> rdf:type seas:PowerQuantity;
                sear:value <span style="color: #FD971F;">?value</span>;
                sear:measurementStart <span style="color: #FD971F;">?time</span> .
  <span style="color: #F92672;">FILTER</span><span style="color: #AE81FF;">(</span> year<span style="color: #66D9EF;">(</span><span style="color: #FD971F;">?time</span><span style="color: #66D9EF;">)</span> = <span style="color: #AE81FF;">2014</span> &amp;&amp; month<span style="color: #66D9EF;">(</span><span style="color: #FD971F;">?time</span><span style="color: #66D9EF;">)</span> = <span style="color: #AE81FF;">1</span> <span style="color: #AE81FF;">)</span>
        <span style="color: #F92672;">}</span>
  <span style="color: #FD971F;">}</span>
        <span style="color: #F92672;">BIND</span> <span style="color: #FD971F;">(</span> rand<span style="color: #F92672;">()</span> <span style="color: #F92672;">AS</span> <span style="color: #FD971F;">?r</span> <span style="color: #FD971F;">)</span>
        <span style="color: #F92672;">FILTER</span> <span style="color: #FD971F;">(</span> <span style="color: #FD971F;">?r</span> &lt; <span style="color: #AE81FF;">0</span>.<span style="color: #AE81FF;">001</span> <span style="color: #FD971F;">)</span>
<span style="color: #E6DB74;">}</span>
<span style="color: #F92672;">LIMIT</span> <span style="color: #AE81FF;">100</span><span style="color: #A6E22E;">}</span><span style="color: #66D9EF;">}</span>
<span style="color: #AE81FF;">}</span>
<span style="color: #F92672;">ORDER</span> <span style="color: #F92672;">BY</span> <span style="color: #F92672;">ASC</span><span style="color: #AE81FF;">(</span><span style="color: #FD971F;">?time</span><span style="color: #AE81FF;">)</span>
</pre>
</div>

<p>
Though we are able to query across datasets, there are a number of issues with this approach:
</p>

<ul class="org-ul">
<li>The query is quite complicated to formulate and understand, especially when trying to randomly sample the data</li>
<li>We have to guess the threshold values to select the random samples from. These values should be proportional to the number of triples being sampled from, so in theory we could use SPARQL's COUNT() aggregator function to get this information. In practice, however, the COUNT() function takes a long time to return a value, too long to be practical for our uses.</li>
<li>Even with a lower threshold value, the data from the refit dataset are skewed towards the days at the start of the month. Lowering the threshold should solve this in theory, but again in practice it proves to be impractical: lowering the number to the point where it should return a good spread of data increases the time required to process the query to at least 10 minutes</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org7f05f30" class="outline-3">
<h3 id="org7f05f30">Conclusion</h3>
<div class="outline-text-3" id="text-org7f05f30">
<p>
SPARQL and RDF have many strengths for semantic querying of data. However, for our purposes it has presented several challenges. The largest is that we need a quick way to get a random sample of the data, which is both difficult to describe in SPARQL and takes a long time for any triple store to return. The takeaway from this experiment is that we need to explore hybrid systems that combine the flexible semantic querying capabilities of RDF and SPARQL with the streaming capabilities of other data formats.
</p>

<hr >

<div align=center>
<p>
<a href="http://mthompson.org">Home</a>
</p>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="validation"></p>
</div>
</body>
</html>
